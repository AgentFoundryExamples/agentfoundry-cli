{
  "schema_version": "2.0",
  "total_files": 8,
  "files": [
    {
      "schema_version": "2.0",
      "path": "agentfoundry_cli/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1096,
        "loc": 8,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "agentfoundry_cli/__main__.py",
      "language": "Python",
      "role": "entry-point",
      "role_justification": "common entry point name '__main__'",
      "metrics": {
        "size_bytes": 921,
        "loc": 6,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "agentfoundry_cli/cli.py",
      "language": "Python",
      "role": "cli",
      "role_justification": "CLI-related name 'cli'",
      "metrics": {
        "size_bytes": 6796,
        "loc": 162,
        "todo_count": 0,
        "declaration_count": 6
      },
      "structure": {
        "declarations": [
          "function hello",
          "function run",
          "function validate",
          "function help",
          "function version",
          "function main"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "json",
            "pathlib.Path",
            "sys",
            "typing.Optional"
          ],
          "third-party": [
            "typer"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "agentfoundry_cli/parser.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 37407,
        "loc": 744,
        "todo_count": 0,
        "declaration_count": 18
      },
      "structure": {
        "declarations": [
          "function _levenshtein_distance",
          "function _find_closest_key",
          "class TokenType",
          "class Token",
          "class AFParseError",
          "class AFMissingKeyError",
          "class AFDuplicateKeyError",
          "class AFUnknownKeyError",
          "class AFSyntaxError",
          "class AFEmptyValueError",
          "class AFSizeError",
          "function _strip_utf8_bom",
          "function load_input",
          "class Tokenizer",
          "class Parser",
          "function parse_af_file",
          "function validate_af_content",
          "function parse_af_stdin"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "dataclasses.dataclass",
            "enum.Enum",
            "enum.auto",
            "io",
            "pathlib.Path",
            "sys",
            "typing.Any",
            "typing.Dict",
            "typing.List",
            "typing.Optional",
            "typing.TextIO",
            "typing.Tuple"
          ],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/__init__.py",
      "language": "Python",
      "role": "test",
      "role_justification": "located in 'tests' directory",
      "metrics": {
        "size_bytes": 819,
        "loc": 1,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_cli.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 3855,
        "loc": 64,
        "todo_count": 0,
        "declaration_count": 10
      },
      "structure": {
        "declarations": [
          "function test_main_help_flag",
          "function test_hello_command_default",
          "function test_hello_command_with_name",
          "function test_version_command",
          "function test_version_format",
          "function test_run_command_stub",
          "function test_run_command_in_help",
          "function test_help_command",
          "function test_help_command_with_subcommand",
          "function test_help_command_with_unknown_subcommand"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "re"
          ],
          "third-party": [
            "typer.testing.CliRunner"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_cli_run.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 25027,
        "loc": 468,
        "todo_count": 0,
        "declaration_count": 35
      },
      "structure": {
        "declarations": [
          "function test_run_command_with_valid_file",
          "function test_run_command_with_example_file",
          "function test_run_command_json_only_stdout",
          "function test_run_command_with_missing_file",
          "function test_run_command_with_directory",
          "function test_run_command_with_wrong_extension",
          "function test_run_command_with_missing_required_key",
          "function test_run_command_with_duplicate_key",
          "function test_run_command_with_syntax_error",
          "function test_run_command_with_empty_list",
          "function test_run_command_with_crlf_line_endings",
          "function test_run_command_with_trailing_whitespace",
          "function test_run_command_with_large_list",
          "function test_run_command_help",
          "function test_run_command_treats_help_af_as_filename",
          "function test_run_command_error_includes_filename",
          "function test_run_command_error_includes_line_number",
          "function test_run_command_without_arguments",
          "function test_run_command_json_is_valid",
          "function test_run_command_stdout_stderr_separation",
          "function test_run_command_stdin_valid",
          "function test_run_command_stdin_with_syntax_error",
          "function test_run_command_stdin_with_missing_key",
          "function test_run_command_stdin_no_trailing_newline",
          "function test_run_command_stdin_empty_input",
          "function test_run_command_stdin_json_only_stdout",
          "function test_run_command_file_named_dash",
          "function test_validate_command_with_valid_file",
          "function test_validate_command_with_invalid_file",
          "function test_validate_command_with_missing_file",
          "function test_validate_command_stdin_valid",
          "function test_validate_command_stdin_invalid",
          "function test_validate_command_help",
          "function test_validate_command_ci_workflow",
          "function test_validate_command_in_help"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "json",
            "os",
            "pathlib.Path",
            "tempfile"
          ],
          "third-party": [
            "typer.testing.CliRunner"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_parser.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 50520,
        "loc": 1308,
        "todo_count": 0,
        "declaration_count": 97
      },
      "structure": {
        "declarations": [
          "function test_parse_valid_file",
          "function test_parse_valid_file_with_single_quotes",
          "function test_parse_with_apostrophes",
          "function test_parse_with_escaped_quotes",
          "function test_case_insensitive_keys",
          "function test_whitespace_tolerance",
          "function test_empty_lines_and_comments",
          "function test_missing_purpose_key",
          "function test_missing_vision_key",
          "function test_missing_must_key",
          "function test_missing_dont_key",
          "function test_missing_nice_key",
          "function test_duplicate_key_error",
          "function test_duplicate_key_different_case",
          "function test_unknown_key_error",
          "function test_empty_string_value",
          "function test_empty_list_value",
          "function test_unquoted_string_value",
          "function test_unterminated_string",
          "function test_mismatched_quotes",
          "function test_list_without_brackets",
          "function test_list_missing_closing_bracket",
          "function test_list_with_unquoted_items",
          "function test_trailing_comma_in_list",
          "function test_empty_list_item_rejected",
          "function test_empty_list_item_at_start_rejected",
          "function test_multiple_consecutive_commas_rejected",
          "function test_stray_characters_after_string",
          "function test_missing_colon_separator",
          "function test_empty_key",
          "function test_utf8_bom_handling",
          "function test_parse_file_with_path",
          "function test_parse_nonexistent_file",
          "function test_parse_file_requires_af_extension",
          "function test_parse_file_requires_extension",
          "function test_parse_file_accepts_uppercase_af_extension",
          "function test_error_includes_filename",
          "function test_error_includes_line_number",
          "function test_multiline_strings_supported",
          "function test_list_with_mixed_quotes",
          "function test_single_item_list",
          "function test_list_with_whitespace",
          "function test_keys_returned_lowercase",
          "function test_string_with_newline_escape",
          "function test_string_with_tab_escape",
          "function test_comprehensive_valid_file",
          "function test_utf8_with_emojis",
          "function test_utf8_with_combining_characters",
          "function test_utf8_bom_at_file_start",
          "function test_size_limit_exactly_1mb_minus_1",
          "function test_size_limit_exactly_1mb_accepted",
          "function test_size_limit_over_1mb_rejected",
          "function test_size_limit_exceeds_1mb_rejected",
          "function test_empty_file_rejected",
          "function test_file_with_only_comments_rejected",
          "function test_file_with_only_whitespace_rejected",
          "function test_stdin_support",
          "function test_stdin_size_limit",
          "function test_file_size_check_before_parse",
          "function test_load_input_requires_exactly_one_source",
          "function test_tokenizer_preserves_positions",
          "function test_error_messages_include_position",
          "function test_multiline_strings_preserve_newlines",
          "function test_canonical_key_order_preserved",
          "function test_parse_af_file_canonical_order",
          "function test_validate_af_content_bom_size_consistency",
          "function test_stdin_size_check_before_newline_normalization",
          "function test_multiline_list_with_newlines",
          "function test_multiline_list_trailing_comma",
          "function test_inline_comment_after_value",
          "function test_inline_comment_after_list",
          "function test_inline_comment_in_list",
          "function test_fuzzy_matching_typo_purpose",
          "function test_fuzzy_matching_typo_vision",
          "function test_fuzzy_matching_typo_must",
          "function test_fuzzy_matching_no_suggestion_far_typo",
          "function test_multiline_purpose_with_vision",
          "function test_multiline_vision",
          "function test_mixed_multiline_strings_and_lists",
          "function test_error_with_caret_indicator",
          "function test_newline_separated_items_without_commas",
          "function test_newline_separated_with_mixed_commas",
          "function test_duplicate_key_error_has_caret",
          "function test_empty_key_error_has_caret",
          "function test_unquoted_string_error_has_caret",
          "function test_same_line_items_without_comma_rejected",
          "function test_unterminated_string_has_caret",
          "function test_empty_string_tokenizer_error_has_caret",
          "function test_missing_colon_has_caret",
          "function test_comment_before_string_value",
          "function test_comment_before_list_value",
          "function test_newline_before_value",
          "function test_multiple_comments_before_value",
          "function test_missing_key_has_caret",
          "function test_missing_multiple_keys_has_caret",
          "function test_empty_input_has_caret",
          "function test_whitespace_only_input_has_caret"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "io",
            "os",
            "pathlib.Path",
            "sys",
            "tempfile"
          ],
          "third-party": [
            "pytest"
          ]
        }
      }
    }
  ]
}